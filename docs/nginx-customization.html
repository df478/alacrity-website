<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>NGINX Config · AlaCrity</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Config Customization"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="NGINX Config · AlaCrity"/><meta property="og:type" content="website"/><meta property="og:url" content="https://alacrity-website.vercel.app//index.html"/><meta property="og:description" content="## Config Customization"/><meta property="og:image" content="https://alacrity-website.vercel.app/img/logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://alacrity-website.vercel.app/img/logo.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.png" alt="AlaCrity"/><h2 class="headerTitleWithLogo">AlaCrity</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/get-started.html" target="_self">Docs</a></li><li class=""><a href="https://github.com/df478/alacrity" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Do More</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Basics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/get-started.html">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/alacran-definition-file.html">Alacran Definition File</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment-methods.html">Deployment Methods</a></li><li class="navListItem"><a class="navItem" href="/docs/app-configuration.html">App Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/persistent-apps.html">Persistent Apps</a></li><li class="navListItem"><a class="navItem" href="/docs/cli-commands.html">CLI Commands</a></li><li class="navListItem"><a class="navItem" href="/docs/complete-webapp-tutorial.html">Complete Webapp Tutorial</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Do More</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/resource-monitoring.html">Resource Monitoring</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/nginx-customization.html">NGINX Config</a></li><li class="navListItem"><a class="navItem" href="/docs/service-update-override.html">Service Update Override</a></li><li class="navListItem"><a class="navItem" href="/docs/app-scaling-and-cluster.html">App Scaling &amp; Cluster</a></li><li class="navListItem"><a class="navItem" href="/docs/pre-deploy-script.html">Pre-deploy Script</a></li><li class="navListItem"><a class="navItem" href="/docs/run-locally.html">Run Locally</a></li><li class="navListItem"><a class="navItem" href="/docs/certbot-config.html">Certbot Overrides</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Recipes and Tips</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/sample-apps.html">Sample Apps</a></li><li class="navListItem"><a class="navItem" href="/docs/database-connection.html">Database Connection</a></li><li class="navListItem"><a class="navItem" href="/docs/best-practices.html">Best Practices</a></li><li class="navListItem"><a class="navItem" href="/docs/backup-and-restore.html">Backup &amp; Restore</a></li><li class="navListItem"><a class="navItem" href="/docs/recipe-deploy-create-react-app.html">Static React App</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">CI/CD Integration</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ci-cd-integration.html">Intro</a></li><li class="navListItem"><a class="navItem" href="/docs/ci-cd-integration/deploy-from-github.html">Deploy from GitHub</a></li><li class="navListItem"><a class="navItem" href="/docs/ci-cd-integration/deploy-from-gitlab.html">Deploy from GitLab</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Help</h3><ul class=""><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Server Purchase</h4><ul><li class="navListItem"><a class="navItem" href="/docs/server-purchase/digitalocean.html">DigitalOcean</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/disk-cleanup.html">Disk Clean-Up</a></li><li class="navListItem"><a class="navItem" href="/docs/firewall.html">Firewall &amp; Port Forwarding</a></li><li class="navListItem"><a class="navItem" href="/docs/troubleshooting.html">Troubleshooting</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/df478/alacrity-website/edit/master/docs/nginx-customization.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">NGINX Config</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="config-customization"></a><a href="#config-customization" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Config Customization</h2>
<p>Although AlaCrity automatically manages everything about routing HTTP requests to your apps, there might still be some special config values that you want to manually tweak. It can be special caching logic for a special file type or route, timeout customization, max body size and many more parameters that you can manually adjust via nginx.</p>
<p>AlaCrity enables you to manually adjust these parameters via fully customized config files. There are three areas that you can adjust parameters:</p>
<ul>
<li>NGINX Base Config File (<code>/etc/nginx/nginx.conf</code> inside container). This is the first file that NGINX will look at. It redirects nginx to look up other config files. You can manually tweak this file in web dashboard, settings.</li>
<li>AlaCrity Config File (<code>/etc/nginx/conf.d/alacran-root.conf</code> inside container). This is the config file that you, the developer, will interact with when you visit <code>alacran.root.domain.com</code>. Typically, you shouldn't need to modify this file. But if you need to, you can modify it in web dashboard &gt; settings</li>
<li>Application Specific Config File (<code>/etc/nginx/conf.d/alacran.conf</code> inside container). This is where you can change application-specific settings. Let's say, you have a video uploader app where you want to allow incoming body size to be 1GB. You can do so, by going to web dashboard &gt; Apps &gt; Apps Edit and manually change this parameter. Note that any change that you make is only applied to this specific app, all other apps will use the default config. This configuration template will be applied to ALL DOMAINS pointing to the app, i.e., Alacran creates one server block for <code>my-app-name.alacranroot.domain.com</code> and potentially another server block <code>www.myapp.com</code> and etc...</li>
</ul>
<p>Once you've changed the template, you can see the compiled version of your nginx configs at <code>/alacran/generated/nginx</code> from within the <code>alacrity/alacrity</code> Docker image (<code>docker exec -it docker_container_id /bin/sh</code>) in order to verify whether the final compiled version is what you wanted by examining the files listed below. Note that you CANNOT MANUALLY modify these files as they will get overridden by Alacran. If you want to make any change, you should always change the Nginx template in AlaCrity dashboard.</p>
<ul>
<li><code>/alacran/generated/nginx/nginx.conf</code> – generated NGINX Base Config File</li>
<li><code>/alacran/generated/nginx/conf.d/alacran-root.conf</code> – generated AlaCrity Config File</li>
<li><code>/alacran/generated/nginx/conf.d/alacran.conf</code> – generated Application Specific Config File</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="custom-files-and-directories"></a><a href="#custom-files-and-directories" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom Files and Directories</h2>
<p>On top of config customization, you might need to use some files in your nginx container, things such as custom SSL certs, specific static assets and etc. Since in AlaCrity instance, everything (including nginx) is sitting in a separate container, you'll need to map a directory from your host to the container. Alacran already did that for you. The directory <code>/alacran/data/nginx-shared</code> in your server is available in your nginx container as <code>/nginx-shared</code>. Let's say you place a custom SSL cert in that folder and call it <code>/alacran/data/nginx-shared/custom-cert.pem</code>. In order to reference that file in your nginx config, you'll use <code>/nginx-shared/custom-cert.pem</code></p>
<h2><a class="anchor" aria-hidden="true" id="customize-and-override-the-nginx-config-for-all-apps"></a><a href="#customize-and-override-the-nginx-config-for-all-apps" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customize and override the NGINX Config for all apps</h2>
<p>To modify the default NGINX configuration for newly created apps to add in the IP whitelist and other NGIX config.</p>
<p>1- Obtain a copy of the <code>server-block-conf.ejs</code> template from the AlaCrity GitHub repository. <a href="https://github.com/df478/alacrity/blob/master/template/server-block-conf.ejs"><strong>here</strong></a></p>
<p>2- Create the file <code>/alacran/data/server-block-conf-override.ejs</code>, copy the contents of the template, and make the desired modifications.
Assuming you start AlaCrity Docker with <code>-v /alacran:/alacran</code> (default setup)</p>
<p>3- Restart your AlaCrity so that the override file content is consumed: <code>docker service update --force alacran-alacran</code></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/resource-monitoring.html"><span class="arrow-prev">← </span><span>Resource Monitoring</span></a><a class="docs-next button" href="/docs/service-update-override.html"><span>Service Update Override</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#config-customization">Config Customization</a></li><li><a href="#custom-files-and-directories">Custom Files and Directories</a></li><li><a href="#customize-and-override-the-nginx-config-for-all-apps">Customize and override the NGINX Config for all apps</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.png" alt="AlaCrity" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/get-started.html">Getting Started</a></div><div><h5>More</h5><a href="https://github.com/df478/alacrity" target="_blank">GitHub</a></div></section><section class="copyright">2025 Alacrity</section></footer></div></body></html>